{
  "version": 3,
  "sources": ["../../../../OneDrive/%C5%A0kola/2.rok/Weby/4IZ268-2025-2026-ZS/www/rakf00/sp2/weather-buddy/netlify/functions/openAI.js"],
  "sourceRoot": "C:/Users/rakus/AppData/Local/Temp/tmp-18336-sNLZ3yyXdFk9",
  "sourcesContent": ["const headers = {\r\n    \"Access-Control-Allow-Origin\": \"*\",\r\n    \"Content-Type\": \"application/json\",\r\n};\r\nconst res = (code, body) => ({\r\n    statusCode: code,\r\n    headers,\r\n    body: JSON.stringify(body),\r\n});\r\n\r\nexports.handler = async (event) => {\r\n    if (event.httpMethod === \"OPTIONS\")\r\n        return {statusCode: 200, headers, body: \"\"};\r\n    if (event.httpMethod !== \"POST\")\r\n        return res(405, {error: \"Method Not Allowed\"});\r\n    try {\r\n        const {weatherData, preferences} = JSON.parse(event.body);\r\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${process.env.OPEN_API_KEY}`,\r\n            },\r\n            body: JSON.stringify({\r\n                model: \"gpt-3.5-turbo-0125\",\r\n                messages: [\r\n                    {\r\n                        role: \"user\",\r\n                        content: \"You are a friendly assistant who gives concise recommendations.\",\r\n                    },\r\n                    {\r\n                        role: \"user\",\r\n                        content: `Write a short personal description of what clothes to choose depending on the weather.\r\n         If it is rainy, mention a raincoat or umbrella, otherwise do not. Short, max 3 sentences. \r\n        Consider info about person (age, weight in kg, height in cm etc.): ${JSON.stringify(preferences)} and Hourly weather data: ${JSON.stringify(weatherData)}.`,\r\n                    },\r\n                ],\r\n                max_tokens: 100,\r\n            }),\r\n        });\r\n        const data = await response.json();\r\n        return res(200, {result: data.choices[0].message.content.trim()});\r\n    } catch {\r\n        return res(500, {error: \"Failed to fetch recommendation\"});\r\n    }\r\n};\r\n"],
  "mappings": ";AAAA,IAAM,UAAU;AAAA,EACZ,+BAA+B;AAAA,EAC/B,gBAAgB;AACpB;AACA,IAAM,MAAM,CAAC,MAAM,UAAU;AAAA,EACzB,YAAY;AAAA,EACZ;AAAA,EACA,MAAM,KAAK,UAAU,IAAI;AAC7B;AAEA,QAAQ,UAAU,OAAO,UAAU;AAC/B,MAAI,MAAM,eAAe;AACrB,WAAO,EAAC,YAAY,KAAK,SAAS,MAAM,GAAE;AAC9C,MAAI,MAAM,eAAe;AACrB,WAAO,IAAI,KAAK,EAAC,OAAO,qBAAoB,CAAC;AACjD,MAAI;AACA,UAAM,EAAC,aAAa,YAAW,IAAI,KAAK,MAAM,MAAM,IAAI;AACxD,UAAM,WAAW,MAAM,MAAM,8CAA8C;AAAA,MACvE,QAAQ;AAAA,MACR,SAAS;AAAA,QACL,gBAAgB;AAAA,QAChB,eAAe,UAAU,QAAQ,IAAI,YAAY;AAAA,MACrD;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACjB,OAAO;AAAA,QACP,UAAU;AAAA,UACN;AAAA,YACI,MAAM;AAAA,YACN,SAAS;AAAA,UACb;AAAA,UACA;AAAA,YACI,MAAM;AAAA,YACN,SAAS;AAAA;AAAA,6EAE4C,KAAK,UAAU,WAAW,CAAC,6BAA6B,KAAK,UAAU,WAAW,CAAC;AAAA,UAC5I;AAAA,QACJ;AAAA,QACA,YAAY;AAAA,MAChB,CAAC;AAAA,IACL,CAAC;AACD,UAAM,OAAO,MAAM,SAAS,KAAK;AACjC,WAAO,IAAI,KAAK,EAAC,QAAQ,KAAK,QAAQ,CAAC,EAAE,QAAQ,QAAQ,KAAK,EAAC,CAAC;AAAA,EACpE,QAAQ;AACJ,WAAO,IAAI,KAAK,EAAC,OAAO,iCAAgC,CAAC;AAAA,EAC7D;AACJ;",
  "names": []
}
